import * as THREE from 'three';
import { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';


const scene = new THREE.Scene();

const camera = new THREE.PerspectiveCamera(75, innerWidth/innerHeight, 0.1, 1000);

const renderer = new THREE.WebGLRenderer()


renderer.setSize(innerWidth, innerHeight)
renderer.setPixelRatio(devicePixelRatio)
document.body.appendChild(renderer.domElement)
camera.position.z = 800

const loader = new THREE.FileLoader();

let loadedData = [];
loader.load("./jp_mesh.csv",
    function (data) {
        // console.log(data);
        for (let row of data.split('\r\n')) {
            loadedData.push(parseFloat(row));
        }
        //resolve(loadedData)
        dataIsReady(loadedData);
    },
    function (xhr) { console.log(('Loading data : ' + xhr.loaded / xhr.total * 100) + '% loaded') },
    function (err) { console.error(err) }
);
// console.log(loadedData)


function dataIsReady(data){
  console.log( data)

  let new_data = new Float32Array(data);

  const dotGeometry = new THREE.BufferGeometry();
  dotGeometry.setAttribute('position', new THREE.BufferAttribute(new_data, 3));
  const dotMaterial = new THREE.PointsMaterial({ size: 1.2, color: 0xffff00 });
  const dot = new THREE.Points(dotGeometry, dotMaterial);
  scene.add(dot);

}

// for(let i=0; i<100; i++){
//   console.log(loadedData[i])
// }


const myco = new Float32Array([-15.000000, 167.000000, -62.708134, -14.000000, 82.000000, -137.302166, -17.000000, 108.000000, -70.130933, -34.000000, -8.000000, -109.296889, -13.000000, 54.000000, -147.450017, -13.000000, 18.000000, -139.559372, -12.000000, -67.000000, -78.560395, -198.000000, -69.000000, 20.483111, -12.000000, -127.000000, -67.200936, -11.000000, -163.000000, -75.793536, -7.000000, -296.000000, -60.595656, -15.000000, 177.000000, -58.702290, -15.000000, 186.000000, -50.566771, -16.000000, 193.000000, -38.640290, -16.000000, 205.000000, -29.562116, -16.000000, 217.000000, -32.645135, -16.000000, 232.000000, -37.681656, -17.000000, 248.000000, -33.480392, -21.000000, 280.000000, -9.298310, -15.000000, 97.000000, -123.555246, -40.000000, 95.000000, -88.828945, -289.000000, -168.000000, 129.889668, -123.000000, -45.000000, -4.040705, -149.000000, -43.000000, -2.197212, -174.000000, -45.000000, 4.658205, -207.000000, -61.000000, 25.615024, -100.000000, -52.000000, -1.523443, -164.000000, -126.000000, -17.715332, -133.000000, -122.000000, -17.419838, -192.000000, -121.000000, -8.718993, -210.000000, -109.000000, 2.362617, -225.000000, -47.000000, 39.946321, -116.000000, 320.000000, 24.609206, -207.000000, -78.000000, 28.714812, -294.000000, -53.000000, 151.616390, -252.000000, -66.000000, 64.010361, -144.000000, 56.000000, -18.825536, -48.000000, 160.000000, -60.413823, -46.000000, 184.000000, -46.856016, -81.000000, 169.000000, -44.052933, -103.000000, 177.000000, -21.428036, -72.000000, 185.000000, -35.115784, -93.000000, 186.000000, -14.617300, -143.000000, 214.000000, 25.937713, -36.000000, 81.000000, -135.330561, -38.000000, 54.000000, -144.733247, -244.000000, -135.000000, 6.636425, -89.000000, -8.000000, -27.053512, -97.000000, 70.000000, -74.061539, -98.000000, 55.000000, -67.032885, -219.000000, 51.000000, 14.108342, -36.000000, 20.000000, -131.922264, -187.000000, -165.000000, -39.948289, -222.000000, -155.000000, -19.448422, -264.000000, -218.000000, 75.694289, -70.000000, -139.000000, -60.546144, -106.000000, -109.000000,
  -9.179126, -163.000000, 184.000000, 28.275636, -264.000000, 197.000000, 240.975356, -80.000000, 85.000000, -63.014596, -59.000000, 95.000000, -64.158059, -130.000000, 190.000000, 27.830274, -123.000000, 190.000000, 21.268847, -236.000000, -172.000000, -8.556783, -100.000000, 80.000000, -59.018408, -138.000000, -162.000000, -54.317810, -143.000000, -184.000000, -61.810242, -156.000000, -284.000000, -27.424063, -246.000000, -193.000000, 27.746980, -142.000000, -233.000000, -46.068454, -258.000000, -147.000000, 27.165656, -271.000000, -153.000000, 75.424562, -48.000000, 174.000000, -56.134253, -77.000000, 177.000000, -40.223008, -98.000000, 182.000000, -19.897675, -74.000000, 90.000000, -57.170730, -126.000000, 190.000000, 24.368347, -114.000000, 199.000000, 10.526225, -120.000000, 191.000000, 20.532214, -65.000000, 78.000000, -99.268780, -89.000000, 189.000000, -10.292338, -69.000000, 189.000000, -24.601845, -44.000000, 191.000000, -35.464842, -58.000000, 277.000000, -7.775122, -52.000000, 244.000000, -31.638010, -50.000000, 228.000000, -35.027393, -47.000000, 214.000000, -29.479541, -44.000000, 202.000000, -26.313827, -89.000000, 196.000000, -3.203432, -94.000000, 201.000000, -6.703535, -99.000000, 209.000000, -9.617293, -104.000000, 217.000000, -4.492182, -132.000000, 145.000000, -15.845430, -292.000000, 68.000000, 266.066225, -16.000000, 103.000000, -89.228183, -103.000000, 194.000000, 11.554475, -108.000000, 196.000000, 9.725439, -51.000000, 105.000000, -63.684518, -92.000000, 95.000000, -38.432827, -54.000000, 100.000000, -64.781674, -117.000000, 7.000000, -17.149953, -159.000000, 22.000000, -8.635067, -104.000000, 66.000000, -51.600364, -221.000000, -258.000000, 20.305489, -204.000000, -221.000000, -11.849648, -197.000000, -186.000000, -37.436755, -121.000000, 238.000000, 13.786258, -80.000000, -176.000000, -73.416619, -79.000000, -234.000000, -64.951389, -87.000000, -295.000000, -54.583343, -195.000000, -51.000000, 15.606270, -249.000000, -30.000000, 55.785304, -86.000000, -58.000000, 1.146983, -232.000000,
  -97.000000, 25.083553, -71.000000, -25.000000, -37.500943, -80.000000, 61.000000, -99.671758, -273.000000, -8.000000, 85.853726, -233.000000, -12.000000, 34.608895, -201.000000, -2.000000, 12.209541, -153.000000, -5.000000, 0.297876, -117.000000, -14.000000, -6.288551, -90.000000, -25.000000, -14.248504, -37.000000, -61.000000, -68.377441, -270.000000, 45.000000, 83.617152, -250.000000, -102.000000, 36.131272, -28.000000, 95.000000, -122.278612, -88.000000, 17.000000, -36.200609, -303.000000, -53.000000, 235.550670, -69.000000, -39.000000, -19.549461, -106.000000, 68.000000, -24.990246, -218.000000, -77.000000, 33.971735, -80.000000, 44.000000, -90.991099, -282.000000, 132.000000, 260.203770, -86.000000, -66.000000, 6.381545, -58.000000, 29.000000, -116.401694, -216.000000, 253.000000, 115.107819, -212.000000, 288.000000, 161.622429, -289.000000, 58.000000, 174.456423, -244.000000, 218.000000, 142.241447, -284.000000, -107.000000, 120.379409, -119.000000, 349.000000, 40.395143, -26.000000, 101.000000, -87.659746, -112.000000, 36.000000, -25.517657, -271.000000, -62.000000, 89.676368, -173.000000, -58.000000, 5.473445, -150.000000, -57.000000, -0.736290, -119.000000, 203.000000, 14.929113, -267.000000, 99.000000, 96.499956, -74.000000, 388.000000, 49.750863, -147.000000, 350.000000, 98.509690, -177.000000, 324.000000, 126.669109, -9.000000, -232.000000, -70.313172, -22.000000, 393.000000, 43.600361, -128.000000, -59.000000, -1.954249, -107.000000, -63.000000, 1.360309, -93.000000, -64.000000, 6.163958, -266.000000, -108.000000, 60.987404, -112.000000, -88.000000, -4.022630, -135.000000, -97.000000, -9.050585, -158.000000, -100.000000, -8.057796, -181.000000, -96.000000, -1.287980, -194.000000, -88.000000, 7.668544, -300.000000, -116.000000, 188.099796, -188.000000, -63.000000, 13.558386, -18.000000, 129.000000, -61.524915, -104.000000, 133.000000, -33.893679, -79.000000, 81.000000, -73.268002, -54.000000, 128.000000, -59.224081, -12.000000, -97.000000, -63.399149, -184.000000, 290.000000, 93.609129, -153.000000,
  320.000000, 68.798057, -76.000000, 368.000000, 16.451342, -239.000000, 249.000000, 203.446002, -95.000000, -75.000000, 2.017309, -53.000000, -19.000000, -72.267028, -22.000000, 374.000000, 11.274969, -114.000000, 372.000000, 68.921466, -280.000000, 117.000000, 175.734927, -69.000000, 199.000000, -16.196664, -74.000000, 208.000000, -19.654514, -78.000000, 219.000000, -23.318502, -81.000000, 233.000000, -19.031394, -94.000000, 261.000000, 0.356516, -109.000000, 188.000000, 4.234152, -114.000000, 186.000000, 4.402089, -119.000000, 184.000000, 3.819804, -153.000000, 162.000000, 6.263062, -239.000000, 110.000000, 46.064693, -53.000000, -45.000000, -51.193873, -68.000000, -90.000000, -12.787814, -84.000000, -85.000000, -3.087541, -104.000000, 190.000000, 6.865667, -240.000000, 177.000000, 91.062803, -45.000000, -93.000000, -46.051497, -105.000000, 289.000000, 13.830734, -13.000000, -12.000000, -117.963665, -35.000000, -33.000000, -91.268344, -13.000000, -39.000000, -97.304042, -72.000000, 22.000000, -69.442617, -22.000000, 346.000000, -4.113715, -22.000000, 311.000000, -6.866734, -65.000000, 307.000000, -1.796841, -162.000000, 229.000000, 39.806922, -128.000000, 89.000000, -16.300338, -136.000000, 263.000000, 28.791904, -186.000000, 86.000000, -5.375740, -153.000000, 115.000000, -6.926397, -209.000000, 128.000000, 20.183206, -73.000000, 341.000000, 1.819745, -89.000000, 36.000000, -50.169276, -179.000000, 255.000000, 63.764822, -147.000000, 289.000000, 48.044961, -183.000000, 193.000000, 38.344222, -260.000000, 146.000000, 109.760657, -211.000000, 203.000000, 62.198360, -267.000000, 171.000000, 170.360645, -176.000000, 145.000000, 9.687236, -70.000000, -1.000000, -52.772679, -72.000000, 73.000000, -104.708765, -90.000000, 79.000000, -76.300637, -60.000000, 56.000000, -123.472523, -90.000000, -117.000000, -22.293132, -135.000000, -136.000000, -27.904527, -173.000000, -140.000000, -26.132678, -204.000000, -133.000000, -14.758232, -225.000000, -120.000000, 2.192650, -232.000000, -71.000000, 44.880280, -295.000000, 2.000000,
  164.423338, -211.000000, -35.000000, 27.869256, -185.000000, -27.000000, 13.139590, -151.000000, -26.000000, 2.820206, -119.000000, -31.000000, -2.338487, -93.000000, -39.000000, -4.164632, -76.000000, -48.000000, -6.554352, -299.000000, 7.000000, 259.257745, -90.000000, 85.000000, -63.126632, -54.000000, 5.000000, -90.686121, -54.000000, 76.000000, -123.806511, -41.000000, 91.000000, -112.353131, -54.000000, 81.000000, -111.269973, -84.000000, 93.000000, -53.424968, -36.000000, 93.000000, -118.857732, -34.000000, 99.000000, -88.182377, -77.000000, -66.000000, 2.701455, -63.000000, -62.000000, -11.576270, -55.000000, -59.000000, -28.811198, -202.000000, -83.000000, 16.850273, -220.000000, -95.000000, 17.925233, 8.000000, -7.000000, -108.573815, 168.000000, -53.000000, 25.003056, 8.000000, 96.000000, -88.164982, 255.000000, -155.000000, 137.469398, 95.000000, -33.000000, -1.047560, 121.000000, -30.000000, 1.380266, 145.000000, -31.000000, 8.772604, 176.000000, -45.000000, 30.365618, 74.000000, -41.000000, 0.822381, 137.000000, -114.000000, -14.131041, 107.000000, -112.000000, -14.611348, 164.000000, -107.000000, -4.582974, 181.000000, -94.000000, 6.792593, 192.000000, -32.000000, 45.222705, 70.000000, 323.000000, 27.443247, 177.000000, -61.000000, 33.351934, 255.000000, -41.000000, 158.561031, 219.000000, -51.000000, 69.869763, 109.000000, 62.000000, -15.156101, 18.000000, 160.000000, -59.269151, 14.000000, 184.000000, -45.764849, 49.000000, 168.000000, -41.795243, 68.000000, 176.000000, -18.346840, 39.000000, 184.000000, -33.202023, 57.000000, 185.000000, -12.024635, 97.000000, 219.000000, 29.596463, 7.000000, 82.000000, -134.826941, 10.000000, 55.000000, -144.193581, 215.000000, -120.000000, 12.085670, 58.000000, -4.000000, -24.772632, 65.000000, 73.000000, -71.691013, 66.000000, 59.000000, -64.642064, 182.000000, 60.000000, 19.540934, 9.000000, 21.000000, -131.210758, 159.000000, -153.000000, -35.742934, 193.000000, -142.000000, -14.544944, 235.000000, -206.000000, 82.473156, 44.000000, -131.000000, -58.982789,
  81.000000, -100.000000, -6.898452, 118.000000, 190.000000, 32.908833, 211.000000, 207.000000, 248.681221, 46.000000, 88.000000, -61.281869, 25.000000, 96.000000, -63.188468, 92.000000, 189.000000, 31.860816, 85.000000, 189.000000, 24.875999, 207.000000, -159.000000, -3.486758, 66.000000, 84.000000, -56.629452, 110.000000, -152.000000, -51.438361, 115.000000, -174.000000, -58.853416, 138.000000, -276.000000, -23.702902, 219.000000, -183.000000, 33.200039, 121.000000, -227.000000, -42.924855, 228.000000, -132.000000, 32.955997, 240.000000, -141.000000, 81.445120, 17.000000, 174.000000, -54.966781, 44.000000, 177.000000, -38.178313, 63.000000, 181.000000, -17.094214, 40.000000, 93.000000, -55.698698, 88.000000, 189.000000, 28.077945, 77.000000, 199.000000, 13.725325, 82.000000, 189.000000, 24.088157, 33.000000, 81.000000, -97.664591, 52.000000, 188.000000, -7.796631, 34.000000, 189.000000, -22.681004, 11.000000, 190.000000, -34.300209, 15.000000, 279.000000, -6.692517, 16.000000, 245.000000, -30.442560, 16.000000, 229.000000, -33.824320, 14.000000, 214.000000, -28.357686, 11.000000, 203.000000, -25.189955, 52.000000, 196.000000, -0.680164, 57.000000, 201.000000, -4.130049, 63.000000, 209.000000, -6.957428, 67.000000, 218.000000, -1.704906, 91.000000, 151.000000, -12.418599, 242.000000, 80.000000, 274.631483, 66.000000, 193.000000, 14.644360, 71.000000, 196.000000, 12.776813, 17.000000, 107.000000, -62.726686, 56.000000, 99.000000, -36.546547, 21.000000, 102.000000, -63.869520, 84.000000, 12.000000, -14.075333, 125.000000, 29.000000, -4.678151, 70.000000, 70.000000, -49.103439, 199.000000, -248.000000, 25.864005, 181.000000, -213.000000, -7.410048, 168.000000, -175.000000, -33.269509, 76.000000, 243.000000, 16.889872, 54.000000, -168.000000, -71.838393, 60.000000, -231.000000, -63.243390, 72.000000, -291.000000, -52.749473, 165.000000, -36.000000, 20.147395, 214.000000, -15.000000, 61.632773, 61.000000, -48.000000, 3.215566, 202.000000, -82.000000, 30.122289, 41.000000, -22.000000, -35.732327, 49.000000, 64.000000,
  97.759348, 235.000000, 4.000000, 92.409028, 199.000000, 2.000000, 40.220903, 169.000000, 9.000000, 17.041567, 124.000000, 7.000000, 3.991907, 89.000000, -3.000000, -3.296195, 63.000000, -16.000000, -11.948154, 11.000000, -60.000000, -67.648292, 230.000000, 57.000000, 90.193289, 219.000000, -87.000000, 41.746267, -2.000000, 96.000000, -121.813259, 57.000000, 20.000000, -33.841420, 259.000000, -39.000000, 244.380769, 44.000000, -30.000000, -17.820647, 72.000000, 72.000000, -22.514787, 187.000000, -60.000000, 38.995650, 50.000000, 46.000000, -89.078848, 230.000000, 143.000000, 268.417237, 61.000000, -57.000000, 8.531523, 30.000000, 31.000000, -115.097042, 168.000000, 261.000000, 120.336748, 160.000000, 294.000000, 167.589582, 244.000000, 70.000000, 181.359755, 195.000000, 227.000000, 148.153388, 248.000000, -94.000000, 126.889177, 73.000000, 352.000000, 43.420786, -6.000000, 102.000000, -87.394757, 79.000000, 40.000000, -22.656930, 238.000000, -47.000000, 96.003373, 144.000000, -44.000000, 9.523631, 122.000000, -43.000000, 2.804159, 81.000000, 203.000000, 18.249681, 224.000000, 110.000000, 103.138331, 28.000000, 389.000000, 51.792397, 99.000000, 352.000000, 102.377044, 128.000000, 328.000000, 131.500227, 101.000000, -46.000000, 1.064843, 80.000000, -51.000000, 3.953056, 67.000000, -54.000000, 8.485725, 234.000000, -94.000000, 67.154815, 86.000000, -78.000000, -1.479826, 108.000000, -87.000000, -5.997578, 131.000000, -88.000000, -4.500123, 152.000000, -83.000000, 2.699576, 165.000000, -74.000000, 11.948547, 262.000000, -103.000000, 196.412341, 158.000000, -48.000000, 17.850391, 66.000000, 137.000000, -31.152417, 46.000000, 84.000000, -71.557097, 19.000000, 130.000000, -58.072774, 136.000000, 296.000000, 98.151497, 105.000000, 324.000000, 72.519223, 30.000000, 370.000000, 18.158558, 187.000000, 257.000000, 210.350200, 69.000000, -65.000000, 4.339741, 26.000000, -17.000000, -71.117934, 67.000000, 374.000000, 72.010586, 233.000000, 128.000000, 182.590294, 34.000000, 199.000000, -14.215787, 39.000000, 208.000000, -17.675152,
  42.000000, 220.000000, -21.219008, 45.000000, 234.000000, -16.901008, 49.000000, 264.000000, 2.777745, 73.000000, 187.000000, 7.516843, 78.000000, 185.000000, 7.937805, 82.000000, 182.000000, 7.505207, 110.000000, 168.000000, 10.529978, 197.000000, 120.000000, 52.030958, 25.000000, -43.000000, -50.000116, 44.000000, -82.000000, -11.374162, 59.000000, -76.000000, -0.954068, 67.000000, 189.000000, 10.093979, 195.000000, 186.000000, 97.081714, 21.000000, -85.000000, -45.120458, 60.000000, 292.000000, 16.271494, 9.000000, -32.000000, -90.724314, 42.000000, 25.000000, -67.781019, 21.000000, 309.000000, -0.623758, 116.000000, 235.000000, 44.049492, 91.000000, 94.000000, -13.099747, 90.000000, 267.000000, 32.071816, 148.000000, 94.000000, -0.597885, 115.000000, 121.000000, -2.946892, 168.000000, 137.000000, 25.505061, 28.000000, 343.000000, 3.344972, 57.000000, 39.000000, -48.040877, 133.000000, 261.000000, 68.342196, 101.000000, 294.000000, 51.632016, 138.000000, 200.000000, 43.437392, 215.000000, 156.000000, 116.322182, 165.000000, 211.000000, 67.710128, 218.000000, 181.000000, 177.099418, 135.000000, 152.000000, 14.470550, 40.000000, 1.000000, -50.981618, 41.000000, 76.000000, -102.937376, 57.000000, 82.000000, -74.291621, 31.000000, 58.000000, -122.163064, 65.000000, -108.000000, -20.380838, 108.000000, -126.000000, -25.027207, 145.000000, -128.000000, -22.349192, 175.000000, -120.000000, -10.334490, 195.000000, -104.000000, 7.104127, 200.000000, -55.000000, 50.177448, 252.000000, 15.000000, 171.608352, 180.000000, -21.000000, 32.857426, 154.000000, -14.000000, 17.537140, 122.000000, -14.000000, 6.442957, 91.000000, -20.000000, 0.579960, 67.000000, -29.000000, -1.960010, 51.000000, -39.000000, -4.770024, 252.000000, 20.000000, 268.207693, 56.000000, 88.000000, -61.133205, 26.000000, 6.000000, -89.472582, 24.000000, 78.000000, -122.727199, 10.000000, 92.000000, -111.666115, 23.000000, 83.000000, -110.110536, 49.000000, 96.000000, -51.705268, 5.000000, 94.000000, -118.288727, 2.000000, 100.000000, -87.725376, 52.000000
])




const boxGeometry = new THREE.BoxGeometry(1, 1, 1)
const boxMaterial = new THREE.MeshBasicMaterial({color:0x00FF00})
const boxMesh = new THREE.Mesh(boxGeometry, boxMaterial)

const PlaneGeometry = new THREE.PlaneGeometry( 5, 5, 10, 10 );
const planeMaterial = new THREE.MeshBasicMaterial( {color: 0xff0000, side: THREE.DoubleSide} );
const planeMesh = new THREE.Mesh( PlaneGeometry, planeMaterial );


// scene.add(boxMesh)
// scene.add( planeMesh );


const ambient = new THREE.AmbientLight(0x404040, 1);
const light = new THREE.DirectionalLight(0xffffff, 1)
light.position.set(0, 0, 10)
scene.add(ambient);
scene.add(light);




// const loader = new GLTFLoader();
// setInterval((loader.load("./jp_mesh_colored.glb", function(gltf) {
//   scene.add(gltf.scene);
//   renderer.render(scene, camera)
//   //animate();
// })),500)

var x = 0, y = 0, z = 0;

function animate(){
  requestAnimationFrame(animate);
  renderer.render(scene, camera)
  // face.rotation.z += 0.005;

  // dot.position.set(x, y, z);
  // x += 0.01;
  // y += 0.01;
  // z += 0.01;
  
  boxMesh.rotation.x += 0.02
  boxMesh.rotation.y += 0.02
  planeMesh.rotation.x += 0.01
}

animate()

